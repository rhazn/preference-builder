{"version":3,"sources":["../node_modules/@rhazn/logic-components/dist/esm/world-preference-component.entry.js"],"names":["PropositionalWorld","signature","assignment","this","JSON","stringify","signatureSize","size","result","ArrayBuffer","PropositionalWorldParserFactory","getMinimalByteSignatureSize","getMinimalViewForSignatureSize","getWorldNumber","reduce","previous","current","index","has","Math","pow","json","parsed","parse","Set","binary","view","worldFromNumber","number","toString","padStart","concat","buffer","Uint8Array","Uint16Array","Uint32Array","BYTES_PER_ELEMENT","WorldPreference","data","ranks","map","rank","world","toJson","numberOfWorlds","totalWorlds","currentRank","length","numberOfFilledRanks","DataView","setUint8","setUint32","addedRanks","addedWorlds","i","rankOffset","nextFilledRankIndex","slice","findIndex","worldOffset","j","setUint16","possibleWorlds","rankIndex","WorldPreferenceComponent","hostRef","registerInstance","preferenceChanged","createEvent","allowEmptyRows","allowChanges","preference","internalPreference","event","draggedWorld","target","dataset","worldIndex","preventDefault","stopPropagation","oldRank","oldIndex","newPreference","filter","_","newRank","eventPath","path","composedPath","element","undefined","rankindex","manageEmptyRows","emitChange","updateInternalPreference","push","row","emit","h","Host","class","reverse","onDragOver","e","dragOverHandler","onDrop","dragDropHandler","draggable","onDragStart","dragStartHandler","style"],"mappings":"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","file":"static/js/9.f18f9173.chunk.js","sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host } from './index-c0d54430.js';\n\nclass PropositionalWorld {\n    constructor(signature, assignment) {\n        this.signature = signature;\n        this.assignment = assignment;\n    }\n    toJson() {\n        return JSON.stringify([...this.assignment]);\n    }\n    toBinary() {\n        const signatureSize = this.signature.size;\n        const result = new ArrayBuffer(PropositionalWorldParserFactory.getMinimalByteSignatureSize(signatureSize));\n        const view = PropositionalWorldParserFactory.getMinimalViewForSignatureSize(signatureSize, result);\n        view[0] = this.getWorldNumber();\n        return result;\n    }\n    getWorldNumber() {\n        return [...this.signature].reduce((previous, current, index) => {\n            return previous + (this.assignment.has(current) ? Math.pow(2, this.signature.size - 1 - index) : 0);\n        }, 0);\n    }\n}\n\nclass PropositionalWorldParserFactory {\n    constructor(signature) {\n        this.signature = signature;\n    }\n    fromJson(json) {\n        const parsed = JSON.parse(json);\n        return new PropositionalWorld(this.signature, new Set(parsed));\n    }\n    fromBinary(binary) {\n        const view = PropositionalWorldParserFactory.getMinimalViewForSignatureSize(this.signature.size, binary);\n        return PropositionalWorldParserFactory.worldFromNumber(this.signature, view[0]);\n    }\n    static worldFromNumber(signature, number) {\n        const assignment = [...number.toString(2).padStart(signature.size, \"0\")].reduce((previous, current, index) => {\n            return previous.concat(current === \"1\" ? [...signature][index] : []);\n        }, []);\n        return new PropositionalWorld(signature, new Set(assignment));\n    }\n    static getMinimalViewForSignatureSize(size, buffer) {\n        if (size <= 8) {\n            return new Uint8Array(buffer);\n        }\n        if (size <= 16) {\n            return new Uint16Array(buffer);\n        }\n        return new Uint32Array(buffer);\n    }\n    static getMinimalByteSignatureSize(size) {\n        if (size <= 8) {\n            return Uint8Array.BYTES_PER_ELEMENT;\n        }\n        if (size <= 16) {\n            return Uint16Array.BYTES_PER_ELEMENT;\n        }\n        return Uint32Array.BYTES_PER_ELEMENT;\n    }\n}\n\nclass WorldPreference {\n    constructor(signature, data) {\n        this.signature = signature;\n        this.data = data;\n    }\n    toJson() {\n        return JSON.stringify({\n            signature: [...this.signature],\n            ranks: this.data.map(rank => rank.map(world => JSON.parse(world.toJson()))),\n        });\n    }\n    toBinary() {\n        const numberOfWorlds = this.data.reduce((totalWorlds, currentRank) => {\n            return totalWorlds + currentRank.length;\n        }, 0);\n        const numberOfFilledRanks = this.data.reduce((totalWorlds, currentRank) => {\n            return totalWorlds + (currentRank.length > 0 ? 1 : 0);\n        }, 0);\n        if (numberOfFilledRanks === 0) {\n            return new ArrayBuffer(0);\n        }\n        const signatureSize = this.signature.size;\n        const result = new ArrayBuffer(\n        // Version\n        Uint8Array.BYTES_PER_ELEMENT +\n            // Signature size\n            Uint32Array.BYTES_PER_ELEMENT +\n            // Number of worlds in rank + distance to next rank\n            numberOfFilledRanks * (Uint32Array.BYTES_PER_ELEMENT * 2) +\n            // actual worlds\n            numberOfWorlds * PropositionalWorldParserFactory.getMinimalByteSignatureSize(signatureSize));\n        const view = new DataView(result);\n        // Version\n        view.setUint8(0, 1);\n        // Signature size\n        view.setUint32(Uint8Array.BYTES_PER_ELEMENT, signatureSize);\n        let addedRanks = 0;\n        let addedWorlds = 0;\n        for (let i = 0; i < this.data.length; i++) {\n            const rank = this.data[i];\n            if (rank.length === 0) {\n                continue;\n            }\n            const rankOffset = Uint8Array.BYTES_PER_ELEMENT +\n                Uint32Array.BYTES_PER_ELEMENT +\n                addedWorlds * PropositionalWorldParserFactory.getMinimalByteSignatureSize(signatureSize) +\n                addedRanks * Uint32Array.BYTES_PER_ELEMENT * 2;\n            const remainingRanks = this.data.slice(i + 1, this.data.length);\n            const nextFilledRankIndex = remainingRanks.findIndex(rank => rank.length > 0);\n            view.setUint32(rankOffset, rank.length);\n            view.setUint32(rankOffset + Uint32Array.BYTES_PER_ELEMENT, nextFilledRankIndex === -1 ? 0 : nextFilledRankIndex);\n            const worldOffset = rankOffset + Uint32Array.BYTES_PER_ELEMENT * 2;\n            for (let j = 0; j < rank.length; j++) {\n                const world = rank[j];\n                switch (PropositionalWorldParserFactory.getMinimalByteSignatureSize(signatureSize)) {\n                    case Uint8Array.BYTES_PER_ELEMENT:\n                        view.setUint8(worldOffset + j, world.getWorldNumber());\n                        break;\n                    case Uint16Array.BYTES_PER_ELEMENT:\n                        view.setUint16(worldOffset + j, world.getWorldNumber());\n                        break;\n                    case Uint32Array.BYTES_PER_ELEMENT:\n                        view.setUint32(worldOffset + j, world.getWorldNumber());\n                        break;\n                }\n            }\n            addedWorlds += rank.length;\n            addedRanks += 1;\n        }\n        return result;\n    }\n    /**\n     * Exports a WorldPreference to a binary representation using a list of ranks for every world.\n     */\n    toBinaryRanklist() {\n        if (!this.data[0]) {\n            return new ArrayBuffer(0);\n        }\n        const signatureSize = this.signature.size;\n        const possibleWorlds = Math.pow(2, signatureSize);\n        // Array buffers are initialized to 0\n        // 4294967295 is the maximum number in an unsigned 32 bit array\n        const result = new ArrayBuffer(\n        // Version\n        Uint8Array.BYTES_PER_ELEMENT +\n            // Signature size\n            Uint32Array.BYTES_PER_ELEMENT +\n            // Ranks\n            possibleWorlds * Uint32Array.BYTES_PER_ELEMENT);\n        const view = new DataView(result);\n        // Version\n        view.setUint8(0, 1);\n        // Signature size\n        view.setUint32(Uint8Array.BYTES_PER_ELEMENT, signatureSize);\n        let rankIndex = 0;\n        for (const rank of this.data) {\n            for (const world of rank) {\n                // we are treating 0 as \"does not exist\" and shifting all ranks up by one\n                view.setUint32(Uint8Array.BYTES_PER_ELEMENT +\n                    Uint32Array.BYTES_PER_ELEMENT +\n                    world.getWorldNumber() * Uint32Array.BYTES_PER_ELEMENT, rankIndex + 1);\n            }\n            rankIndex++;\n        }\n        return result;\n    }\n}\n\nconst worldPreferenceCss = \":host{display:block}.world-preference table{border-collapse:collapse}.world-preference__rank{border-bottom:1px solid black}.world-preference__rank__number{border-right:1px solid black;padding:0.5rem;font-weight:700}.world-preference__rank__worlds *{display:inline-block;margin:0.5rem;cursor:pointer}.world-preference__rank__worlds_fixed *{display:inline-block;margin:0.5rem}\";\n\nconst WorldPreferenceComponent = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.preferenceChanged = createEvent(this, \"preferenceChanged\", 7);\n    /**\n     * Allow empty rows or not\n     */\n    this.allowEmptyRows = false;\n    /**\n     * Allow changes or not\n     */\n    this.allowChanges = true;\n    /**\n     * Preference over worlds\n     */\n    this.preference = new WorldPreference(new Set(), []);\n    this.internalPreference = new WorldPreference(new Set(), []);\n  }\n  dragStartHandler(event) {\n    if (!this.allowChanges) {\n      return;\n    }\n    this.draggedWorld = {\n      rankIndex: +event.target.dataset.rank,\n      worldIndex: +event.target.dataset.index,\n    };\n  }\n  dragOverHandler(event) {\n    if (!this.allowChanges) {\n      return;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  dragDropHandler(event) {\n    if (!this.allowChanges) {\n      return;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n    const oldRank = this.draggedWorld.rankIndex;\n    const oldIndex = this.draggedWorld.worldIndex;\n    const world = this.internalPreference.data[oldRank][oldIndex];\n    const newPreference = [...this.internalPreference.data];\n    newPreference[oldRank] = newPreference[oldRank].filter((_, index) => index !== oldIndex);\n    let newRank = 0;\n    const eventPath = event.path || (event.composedPath && event.composedPath());\n    for (let i = 0; i < eventPath.length; i++) {\n      const element = eventPath[i];\n      if (element.dataset && element.dataset.rankindex !== undefined) {\n        newRank = +element.dataset.rankindex;\n        break;\n      }\n    }\n    newPreference[newRank] = [...newPreference[newRank], world];\n    this.internalPreference = new WorldPreference(this.internalPreference.signature, this.manageEmptyRows(newPreference));\n    this.emitChange();\n  }\n  updateInternalPreference(newPreference) {\n    this.internalPreference = new WorldPreference(newPreference.signature, this.manageEmptyRows(newPreference.data));\n  }\n  componentWillLoad() {\n    this.updateInternalPreference(this.preference);\n  }\n  manageEmptyRows(preference) {\n    if (preference === undefined || preference.length === 0) {\n      return this.allowEmptyRows ? [[], []] : [[]];\n    }\n    for (var i = preference.length - 1; i >= 0; i--) {\n      if (preference[i].length !== 0) {\n        preference = preference.slice(0, i + 1);\n        break;\n      }\n    }\n    // add one or two additional empty rows on top to allow for creation of new ranks\n    preference.push([]);\n    if (this.allowEmptyRows) {\n      preference.push([]);\n    }\n    if (this.allowEmptyRows) {\n      return preference;\n    }\n    else {\n      // remove all empty rows but the last\n      return preference.filter((row, index) => {\n        if (row.length === 0) {\n          if (index < preference.length - 1) {\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n  }\n  emitChange() {\n    this.preferenceChanged.emit(new WorldPreference(this.internalPreference.signature, this.internalPreference.data.slice(0, this.internalPreference.data.length - (this.allowEmptyRows ? 2 : 1))));\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { class: \"world-preference\" }, h(\"table\", null, this.internalPreference.data\n      .slice()\n      .reverse()\n      .map((rank, index) => {\n      const rankIndex = this.internalPreference.data.length - 1 - index;\n      return (h(\"tr\", { class: \"world-preference__rank\", \"data-rankindex\": rankIndex, onDragOver: e => this.dragOverHandler(e), onDrop: e => this.dragDropHandler(e) }, h(\"td\", { class: \"world-preference__rank__number\" }, rankIndex), h(\"td\", { class: this.allowChanges\n          ? \"world-preference__rank__worlds\"\n          : \"world-preference__rank__worlds_fixed\" }, rank.map((world, worldIndex) => (h(\"propositional-world-component\", { \"data-rank\": rankIndex, \"data-index\": worldIndex, draggable: this.allowChanges, onDragStart: e => this.dragStartHandler(e), world: world }))))));\n    })))));\n  }\n  static get watchers() { return {\n    \"preference\": [\"updateInternalPreference\"]\n  }; }\n};\nWorldPreferenceComponent.style = worldPreferenceCss;\n\nexport { WorldPreferenceComponent as world_preference_component };\n"],"sourceRoot":""}